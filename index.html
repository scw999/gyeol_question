<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²°í•˜ë‹¤ ì£¼ê´€ì  ì„ í˜¸ ì„¤ë¬¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .question-card {
            transition: all 0.3s ease-in-out;
        }
        .result-bar {
            transition: width 1s ease-in-out;
        }
        .gender-specific-q {
            border-left: 4px solid #6366f1;
            background-color: #eef2ff;
        }
        /* Custom styles for range input */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            margin: 7.3px 0;
            background: transparent;
        }
        input[type=range]:focus {
            outline: none;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 11.4px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 5px;
        }
        input[type=range]::-webkit-slider-thumb {
            height: 26px;
            width: 26px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            -webkit-appearance: none;
            margin-top: -7.3px;
        }
        input[type=range]:focus::-webkit-slider-runnable-track {
            background: #d1d5db;
        }
        input[type=range]::-moz-range-track {
            width: 100%;
            height: 11.4px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 5px;
        }
        input[type=range]::-moz-range-thumb {
            height: 26px;
            width: 26px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <!-- Header -->
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-indigo-600">ê²°í•˜ë‹¤</h1>
            <p class="text-lg md:text-xl text-gray-600 mt-2">ì£¼ê´€ì  ì„ í˜¸ ì„¤ë¬¸ (v6.1: í…ìŠ¤íŠ¸ ìˆ˜ì •)</p>
        </header>

        <!-- Input Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Male Form -->
            <div class="bg-blue-50 p-6 rounded-2xl shadow-md border border-blue-200">
                <h2 class="text-2xl font-bold text-center mb-6 text-blue-800">ğŸ‘¨â€ğŸ¦± ë‚¨ì„±</h2>
                <form id="male-form" class="space-y-8">
                    <!-- Questions will be dynamically inserted here -->
                </form>
            </div>

            <!-- Female Form -->
            <div class="bg-pink-50 p-6 rounded-2xl shadow-md border border-pink-200">
                <h2 class="text-2xl font-bold text-center mb-6 text-pink-800">ğŸ‘©â€ğŸ¦° ì—¬ì„±</h2>
                <form id="female-form" class="space-y-8">
                    <!-- Questions will be dynamically inserted here -->
                </form>
            </div>
        </div>

        <!-- Action Button -->
        <div class="text-center mt-8 md:mt-12">
            <button id="view-result-btn" class="bg-indigo-600 text-white font-bold py-4 px-8 rounded-full text-xl hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 transition-transform transform hover:scale-105">
                ê¶í•© ê²°ê³¼ ë³´ê¸°
            </button>
        </div>

        <!-- Result Modal -->
        <div id="result-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
            <div id="result-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-6 md:p-8 relative transform scale-95 transition-transform duration-300">
                <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
                
                <div class="text-center mb-6">
                    <h2 class="text-3xl font-bold text-indigo-600">ê´€ê³„ ê¶í•© ë¦¬í¬íŠ¸</h2>
                </div>

                <!-- Overall Score -->
                <div class="bg-indigo-50 border-2 border-indigo-200 rounded-xl p-6 text-center mb-8">
                    <p class="text-lg text-indigo-800 mb-2">ë‘ ë¶„ì˜ ì¢…í•© ê¶í•© ì§€ìˆ˜ëŠ”?</p>
                    <p id="overall-score" class="text-7xl font-extrabold text-indigo-600">0ì </p>
                    <p id="overall-comment" class="mt-3 text-base text-indigo-700 font-medium"></p>
                    <p class="text-xs text-gray-500 mt-2">* ì¢…í•© ê¶í•©ì€ ê³µí†µ ì§ˆë¬¸ì„ ë°”íƒ•ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.</p>
                </div>

                <!-- Detailed Scores -->
                <div class="space-y-6" id="detailed-results-container">
                    <!-- Detailed results will be inserted here -->
                </div>

                <!-- Ice Breaking Questions -->
                 <div class="mt-10 pt-6 border-t-2 border-gray-200">
                    <h3 class="text-2xl font-bold text-center text-gray-800 mb-6">ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”! ğŸ’¬</h3>
                    <div id="ice-breaking-questions" class="space-y-5">
                        <!-- Ice breakers will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            // Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)
            { gender: 'both', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q1", text: "1ì–µ ì›ì˜ ë³´ë„ˆìŠ¤ê°€ ìƒê²¼ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„ íƒì€?", type: "select", options: [{ value: "a", text: "ì¦‰ì‹œ í‰ì†Œ ê¿ˆê¾¸ë˜ ì°¨ë¥¼ ê³„ì•½í•œë‹¤ (í˜„ì¬ì˜ ë§Œì¡±)" }, { value: "b", text: "ì•ˆì •ì ì¸ ìš°ëŸ‰ì£¼ì— ì¥ê¸° íˆ¬ìí•œë‹¤ (ë¯¸ë˜ì˜ ì•ˆì •)" }, { value: "c", text: "ë¶€ëª¨ë‹˜ê»˜ ì ˆë°˜ì„ ë“œë¦¬ê³  ë‚˜ë¨¸ì§€ëŠ” ì €ì¶•í•œë‹¤ (ê°€ì¡±ê³¼ ê´€ê³„)" }, { value: "d", text: "MBA ì§„í•™ ë“± ì»¤ë¦¬ì–´ ë°œì „ì„ ìœ„í•´ ì‚¬ìš©í•œë‹¤ (ì„±ì¥ê³¼ ì„±ì·¨)" }] },
            { gender: 'both', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q13", text: "ê²°í˜¼ í›„ ì¬ì‚° ê´€ë¦¬ ë°©ì‹ì— ëŒ€í•œ ë‹¹ì‹ ì˜ ìƒê°ì€?", type: "select", options: [{ value: "a", text: "ê°ì ìˆ˜ì…ì€ ê°ì ê´€ë¦¬, ìƒí™œë¹„ë§Œ ê³µë™ ë¶€ë‹´ (ë…ë¦½ì„±)" }, { value: "b", text: "ëª¨ë“  ìˆ˜ì…ì„ í•©ì³ ê³µë™ í†µì¥ìœ¼ë¡œ ê´€ë¦¬ (íˆ¬ëª…ì„±ê³¼ ê³µë™ì²´)" }, { value: "c", text: "ìˆ˜ì…ì´ ë” ë†’ì€ ìª½ì´ ì£¼ë„ì ìœ¼ë¡œ ê´€ë¦¬ (íš¨ìœ¨ì„±)" }] },
            { gender: 'both', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q_child_plan", text: "ìë…€ ê³„íšì— ëŒ€í•œ ë‹¹ì‹ ì˜ ìƒê°ì€ ì–´ë–¤ê°€ìš”?", type: "select", options: [{ value: "a", text: "ê¼­ ë‚³ê³  ì‹¶ë‹¤ (ìë…€ëŠ” ì‚¶ì˜ ê¸°ì¨)" }, { value: "b", text: "ìƒëŒ€ë°©ê³¼ í•©ì˜ëœë‹¤ë©´ ë‚³ê³  ì‹¶ë‹¤ (ê´€ê³„ ì¤‘ì‹¬)" }, { value: "c", text: "ë”©í¬(DINK)ë¥¼ ì„ í˜¸í•œë‹¤ (ê°œì¸ì˜ ì‚¶ ì¤‘ì‹œ)" }, { value: "d", text: "ì•„ì§ ì˜ ëª¨ë¥´ê² ë‹¤ (ë¯¸ì •)"}] },
            { gender: 'male', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q_m1", text: "ì—°ì¸ì´ ë‹¹ì‹ ì˜ ì†Œë“ì´ë‚˜ ì§ì—… ì•ˆì •ì„±ì— ëŒ€í•´ ë¶ˆì•ˆê°ì„ ë‚´ë¹„ì¹œë‹¤ë©´, ë‹¹ì‹ ì˜ ë°˜ì‘ì€?", type: "select", options: [{ value: "a", text: "ë¶ˆì•ˆí•¨ì„ ê³µê°í•˜ë©°, í•¨ê»˜ ë¯¸ë˜ ê³„íšì„ ì„¸ìš´ë‹¤" }, { value: "b", text: "ë‚´ ëŠ¥ë ¥ì„ ë¯¿ì–´ì£¼ì§€ ì•ŠëŠ” ê²ƒ ê°™ì•„ ì„œìš´í•˜ë‹¤" }, { value: "c", text: "ë” ì•ˆì •ì ì¸ ì§ì¥ì„ ì•Œì•„ë´ì•¼ í•˜ë‚˜ ê³ ë¯¼í•œë‹¤" }] },
            { gender: 'female', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q_f1", text: "ê²°í˜¼ì´ë‚˜ ì¶œì‚°ìœ¼ë¡œ ì¸í•´ ì»¤ë¦¬ì–´ê°€ ì¤‘ë‹¨ë  ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•˜ì‹œë‚˜ìš”?", type: "select", options: [{ value: "a", text: "ì»¤ë¦¬ì–´ë³´ë‹¤ ê°€ì •ì´ ì¤‘ìš”í•˜ë¯€ë¡œ, ê°ìˆ˜í•  ìˆ˜ ìˆë‹¤" }, { value: "b", text: "ê²½ë ¥ ë‹¨ì ˆì€ ì•ˆëœë‹¤. íŒŒíŠ¸ë„ˆì™€ í•¨ê»˜ í•´ê²°ì±…ì„ ì°¾ì„ ê²ƒì´ë‹¤" }, { value: "c", text: "ì»¤ë¦¬ì–´ë¥¼ ìœ„í•´ ê²°í˜¼/ì¶œì‚°ì„ ë¯¸ë£¨ê±°ë‚˜ í¬ê¸°í•  ìˆ˜ ìˆë‹¤" }] },
            { gender: 'both', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q2", text: "ë‹¹ì‹ ì´ ìƒê°í•˜ëŠ” 'ê°€ì¥ ì´ìƒì ì¸ ë…¸ë…„ì˜ ëª¨ìŠµ'ì€?", type: "select", options: [{ value: "a", text: "ì‚¬íšŒì ìœ¼ë¡œ ì¡´ê²½ë°›ìœ¼ë©° ì „ë¬¸ì„±ì„ ë°œíœ˜í•˜ëŠ” ì‚¶" }, { value: "b", text: "ì†ì£¼ë“¤ì—ê²Œ ë‘˜ëŸ¬ì‹¸ì—¬ í™”ëª©í•œ ê°€ì •ì„ ê¾¸ë¦¬ëŠ” ì‚¶" }, { value: "c", text: "ë°°ìš°ìì™€ ì„¸ê³„ ì¼ì£¼ë¥¼ í•˜ë©° ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ëŠ” ì‚¶" }, { value: "d", text: "ì¡°ìš©í•œ ì‹œê³¨ì—ì„œ í…ƒë°­ì„ ê°€ê¾¸ë©° í‰ì˜¨í•˜ê²Œ ì‚¬ëŠ” ì‚¶" }] },

            // Part 2: ì„±ê²©/ê¸°ì§ˆ
            { gender: 'both', part: "Part 2: íƒ€ê³ ë‚œ ë‹¤ë¦„ (ì„±ê²©/ê¸°ì§ˆ)", id: "q4", text: "ë”ì°í•˜ê²Œ í˜ë“  í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤. ì§‘ì— ëŒì•„ì˜¨ ë‹¹ì‹ ì˜ ì²« í–‰ë™ì€?", type: "select", options: [{ value: "a", text: "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ì—ê²Œ ì „í™”í•´ ì˜¤ëŠ˜ ì¼ì„ ì „ë¶€ í„¸ì–´ë†“ëŠ”ë‹¤ (ì™¸í–¥/í‘œì¶œí˜•)" }, { value: "b", text: "ì•„ë¬´ë„ ì—†ëŠ” ë°©ì—ì„œ ì¢‹ì•„í•˜ëŠ” ì˜í™”ë¥¼ ë³´ë©° í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°–ëŠ”ë‹¤ (ë‚´í–¥/ì¶©ì „í˜•)" }, { value: "c", text: "ë•€ í˜ë ¤ ìš´ë™í•˜ê±°ë‚˜, ëª°ë‘í•  ìˆ˜ ìˆëŠ” ì·¨ë¯¸ í™œë™ì„ í•œë‹¤ (í™œë™/ì „í™˜í˜•)" }, { value: "d", text: "ë”°ëœ»í•œ ë¬¼ë¡œ ìƒ¤ì›Œí•˜ê³ , ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ì‹œì¼œ ë¨¹ëŠ”ë‹¤ (ê°ê°/ë³´ìƒí˜•)" }] },
            { gender: 'both', part: "Part 2: íƒ€ê³ ë‚œ ë‹¤ë¦„ (ì„±ê²©/ê¸°ì§ˆ)", id: "q5", text: "ì—°ì¸ê³¼ ê°ˆë“±ì´ ìƒê²¼ì„ ë•Œ, ë‹¹ì‹ ì˜ ì¼ë°˜ì ì¸ ë°˜ì‘ì€?", type: "select", options: [{ value: "a", text: "ê°ì •ì´ ê²©í•´ì§€ë”ë¼ë„ ê·¸ ìë¦¬ì—ì„œ ë°”ë¡œ ëŒ€í™”ë¡œ í’€ì–´ì•¼ í•œë‹¤ (ì¦‰ì‹œ í•´ê²°í˜•)" }, { value: "b", text: "ì¼ë‹¨ ê°ì ìƒê°í•  ì‹œê°„ì„ ê°–ê³ , ê°ì •ì´ ê°€ë¼ì•‰ìœ¼ë©´ ëŒ€í™”í•œë‹¤ (ìˆ™ê³  í›„ í•´ê²°í˜•)" }, { value: "c", "text": "ìƒëŒ€ë°©ì˜ ê¸°ë¶„ì´ í’€ë¦´ ë•Œê¹Œì§€ ì¼ë‹¨ ë§ì¶°ì£¼ê³ , ë‚˜ì¤‘ì— ë‹¤ì‹œ ì´ì•¼ê¸°í•œë‹¤ (í™”í•© ìš°ì„ í˜•)" }, { value: "d", text: "ë¬¸ì œë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì–¸ê¸‰í•˜ê¸°ë³´ë‹¤, ì‹œê°„ì´ í•´ê²°í•´ì£¼ê¸¸ ê¸°ë‹¤ë¦°ë‹¤ (íšŒí”¼í˜•)" }] },
            { gender: 'both', part: "Part 2: íƒ€ê³ ë‚œ ë‹¤ë¦„ (ì„±ê²©/ê¸°ì§ˆ)", id: "q15", text: "ì—°ì¸ì´ ì£¼ë§ì— 'ì•„ë¬´ ê³„íš ì—†ì´ ê·¸ëƒ¥ ë– ë‚˜ì!'ë¼ê³  ì œì•ˆí•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì†ë§ˆìŒì€?", type: "range", min: 1, max: 5, default: 3, labels: ["(ë¶ˆì•ˆ) ìˆ™ì†ŒëŠ”? ì˜ˆì‚°ì€?", "(ì„¤ë ˜) ë„ˆë¬´ ì‹ ë‚˜!"] },
            
            // Part 3: ë¼ì´í”„ìŠ¤íƒ€ì¼
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q7", text: "ê¿ˆì— ê·¸ë¦¬ë˜ ì™„ë²½í•œ í† ìš”ì¼, ë‹¹ì‹ ì˜ í•˜ë£¨ëŠ” ì–´ë–¤ ëª¨ìŠµì— ê°€ì¥ ê°€ê¹Œìš´ê°€ìš”?", type: "select", options: [{ value: "a", text: "í•˜ë£¨ ì¢…ì¼ ì¹¨ëŒ€ì™€ í•œ ëª¸! ë„·í”Œë¦­ìŠ¤ì™€ ë°°ë‹¬ ìŒì‹ê³¼ í•¨ê»˜í•˜ëŠ” ì™„ì „í•œ ë°©ì½• (ì™„ì „í•œ íœ´ì‹)" }, { value: "b", text: "ì•„ì¹¨ ì¼ì° ë“±ì‚° í›„, ë§›ìˆëŠ” ë§‰ê±¸ë¦¬ì™€ íŒŒì „ìœ¼ë¡œ ë§ˆë¬´ë¦¬ (ì•„ì›ƒë„ì–´/í™œë™)" }, { value: "c", text: "ë¯¸ìˆ ê´€ì—ì„œ ì˜ê°ì„ ì–»ê³ , ì €ë…ì—” ë¶„ìœ„ê¸° ì¢‹ì€ ì¬ì¦ˆë°”ì—ì„œ ì¹µí…Œì¼ í•œ ì” (ë¬¸í™”/ì˜ˆìˆ )" }, { value: "d", text: "ì¹œêµ¬ë“¤ê³¼ ë§Œë‚˜ ë¸ŒëŸ°ì¹˜ë¥¼ ì¦ê¸°ê³ , ì €ë…ì—” ìƒˆë¡œìš´ ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ëŠ” íŒŒí‹° ì°¸ì„ (ì‚¬êµ/ë„¤íŠ¸ì›Œí‚¹)" }, { value: "e", text: "ëŒ€ì²­ì†Œë¡œ ì§‘ì„ ë°˜ì§ì´ê²Œ ë§Œë“¤ê³ , ì •ì„±ê» ìš”ë¦¬í•´ì„œ ì†Œì¤‘í•œ ì‚¬ëŒê³¼ ì €ë… ì‹ì‚¬ (ìê¸°ê´€ë¦¬/ì•ˆì •)" }, { value: "f", text: "ë•€ í˜ë¦¬ëŠ” ìš´ë™(í—¬ìŠ¤, í•„ë¼í…ŒìŠ¤) í›„ ë§ˆì‹œëŠ” ì‹œì›í•œ ë‹¨ë°±ì§ˆ ì‰ì´í¬ (ìŠ¤í¬ì¸ /ê±´ê°•)" }, { value: "g", text: "ì¹œêµ¬ë“¤ê³¼ ëª¨ì—¬ ë³´ë“œê²Œì„ì„ í•˜ë©° ë°¤ìƒˆ ì›ƒê³  ë– ë“¤ê¸° (ì‹¤ë‚´/ì‚¬êµ)" }, { value: "h", text: "í‰ì†Œ ë°°ìš°ê³  ì‹¶ì—ˆë˜ ë² ì´í‚¹ ë“± ì›ë°ì´ í´ë˜ìŠ¤ ì°¸ì—¬í•˜ê¸° (ìê¸°ê³„ë°œ/ì·¨ë¯¸)" }, { value: "i", text: "ë°˜ë ¤ë™ë¬¼ê³¼ í•¨ê»˜ ì• ê²¬ ì¹´í˜ë‚˜ ë„“ì€ ê³µì›ì—ì„œ ì‹œê°„ ë³´ë‚´ê¸° (ë°˜ë ¤ë™ë¬¼/êµê°)" }] },
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q_food_style", text: "í‰ì†Œ ë‹¹ì‹ ì˜ ìŒì‹ ì·¨í–¥ì€ ì–´ë–¤ê°€ìš”?", type: "select", options: [{ value: "a", text: "ê¹€ì¹˜ì°Œê°œ, ëœì¥ì°Œê°œ ìµœê³ ! ìµìˆ™í•œ í•œì‹ì„ ê°€ì¥ ì„ í˜¸ (í•œì‹íŒŒ)" }, { value: "b", text: "íŒŒìŠ¤íƒ€, ìŠ¤í…Œì´í¬, í”¼ì ë“± ìƒˆë¡œìš´ ì–‘ì‹ì„ ì¦ê¹€ (ì–‘ì‹íŒŒ)" }, { value: "c", text: "ë§ˆë¼íƒ•, ìŒ€êµ­ìˆ˜ ë“± ì´êµ­ì ì¸ ìŒì‹ì— ë„ì „í•˜ëŠ” ê²ƒì„ ì¦ê¹€ (ëª¨í—˜íŒŒ)" }, { value: "d", text: "ê°€ë¦¬ëŠ” ê²ƒ ì—†ì´ ë‹¤ ì˜ ë¨¹ìŒ (ëŒ€ì‹ê°€)" }] },
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q_hobby_food", text: "ì§‘ì—ì„œ ì˜í™”ë¥¼ ë³´ê±°ë‚˜ ì·¨ë¯¸ ìƒí™œì„ í•  ë•Œ, ë‹¹ì‹ ì˜ ìµœì•  ê°„ì‹ ì¡°í•©ì€?", type: "select", options: [{ value: "a", text: "ì§­ì§¤í•œ íŒì½˜ê³¼ ì‹œì›í•œ ì½œë¼ (í´ë˜ì‹ ì¡°í•©)" }, { value: "b", text: "ë‹¬ì½¤í•œ ì¼€ì´í¬ì™€ í–¥ê¸‹í•œ ì»¤í”¼/ì°¨ (ë””ì €íŠ¸ íƒ€ì„)" }, { value: "c", text: "ë§¤ì½¤í•œ ë–¡ë³¶ì´ì™€ ë°”ì‚­í•œ íŠ€ê¹€ (K-ë¶„ì‹ ì¡°í•©)" }, { value: "d", text: "ê°€ë²¼ìš´ ê³¼ì¼ê³¼ ì¹˜ì¦ˆ í”Œë˜í„°, ì™€ì¸ í•œ ì” (ë¶„ìœ„ê¸° ì¡°í•©)" }, { value: "e", text: "ë”°ë¡œ ì±™ê²¨ ë¨¹ì§€ ì•Šê³ , í™œë™ì—ë§Œ ì§‘ì¤‘í•œë‹¤ (ì§‘ì¤‘í˜•)" }] },
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q_dessert_habit", text: "ì‹ì‚¬ í›„ì— ë””ì €íŠ¸ë¥¼ ì¦ê²¨ ë“œì‹œë‚˜ìš”?", type: "select", options: [{ value: "a", text: "ë„¤, ë””ì €íŠ¸ ë°°ëŠ” ë”°ë¡œ ìˆì–´ìš”! (í•„ìˆ˜)" }, { value: "b", text: "ê°€ë” ì¦ê¸°ëŠ” í¸ì´ì—ìš” (ì„ íƒ)" }, { value: "c", text: "ì•„ë‹ˆìš”, ê±°ì˜ ë¨¹ì§€ ì•Šì•„ìš” (ìƒëµ)" }] },
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q_dessert_preference", text: "ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ë””ì €íŠ¸ ìŠ¤íƒ€ì¼ì€ ë¬´ì—‡ì¸ê°€ìš”? (ë””ì €íŠ¸ë¥¼ ì•ˆ ë“œì‹œë©´ 'í•´ë‹¹ ì—†ìŒ' ì„ íƒ)", type: "select", options: [{ value: "a", text: "ì¼€ì´í¬, ë§ˆì¹´ë¡± ë“± ë‹¬ì½¤í•œ ì„œì–‘ì‹ ë””ì €íŠ¸" }, { value: "b", text: "ë¹™ìˆ˜, ì•„ì´ìŠ¤í¬ë¦¼ ë“± ì‹œì›í•œ ë””ì €íŠ¸" }, { value: "c", text: "ì•½ê³¼, ë–¡, íŒ¥ë¹™ìˆ˜ ë“± K-ë””ì €íŠ¸" }, { value: "d", text: "ë””ì €íŠ¸ëŠ” ë³„ë¡œ... (í•´ë‹¹ ì—†ìŒ)" }] },
            { gender: 'male', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q_m2", text: "ê°œì¸ì ì¸ ì·¨ë¯¸(ê²Œì„, ë‚šì‹œ, ë™í˜¸íšŒ ë“±)ì— ì£¼ë§ ì‹œê°„ì„ ì˜¨ì „íˆ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ëŒ€í•´ ì—°ì¸ì´ ì„œìš´í•´í•œë‹¤ë©´?", type: "select", options: [{ value: "a", text: "ì—°ì¸ê³¼ì˜ ì‹œê°„ì´ ë” ì¤‘ìš”í•˜ë¯€ë¡œ, ì·¨ë¯¸ë¥¼ ì¤„ì¸ë‹¤" }, { value: "b", text: "ì„œìš´í•¨ì„ í’€ì–´ì£¼ê³ , ì·¨ë¯¸ì˜ ì¤‘ìš”ì„±ì„ ì„¤ëª…í•˜ë©° íƒ€í˜‘ì ì„ ì°¾ëŠ”ë‹¤" }, { value: "c", text: "ê°œì¸ì˜ ì‹œê°„ì€ ì¡´ì¤‘ë°›ì•„ì•¼ í•œë‹¤ê³  ì£¼ì¥í•œë‹¤" }] },
            { gender: 'female', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q_f2", text: "ë§ë²Œì´ë¥¼ í•  ê²½ìš°, ê°€ì‚¬ ë¶„ë‹´ì˜ ê°€ì¥ ì´ìƒì ì¸ ëª¨ìŠµì€?", type: "select", options: [{ value: "a", text: "ì‹œê°„ ì—¬ìœ ê°€ ìˆëŠ” ì‚¬ëŒì´ ë” ë§ì´ í•œë‹¤" }, { value: "b", text: "ê°ì ì˜í•˜ëŠ” ì¼ì„ ë¶„ë‹´í•´ì„œ ì²˜ë¦¬í•œë‹¤" }, { value: "c", text: "5:5ë¡œ ê³µí‰í•˜ê²Œ, ë˜ëŠ” ê·œì¹™ì„ ì •í•´ì„œ ë¶„ë‹´í•œë‹¤" }] },
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q8", text: "í”¼ê³¤í•˜ê²Œ í‡´ê·¼í–ˆëŠ”ë°, ì„¤ê±°ì§“ê±°ë¦¬ê°€ ìŒ“ì—¬ìˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€?", type: "range", min: 1, max: 5, default: 3, labels: ["ë‚´ì¼ë¡œ ë¯¸ë£¬ë‹¤", "í”¼ê³¤í•´ë„ ë°”ë¡œ ì¹˜ìš´ë‹¤"] },

            // Part 4: ê´€ê³„ì˜ ê¸°ìˆ 
            { gender: 'both', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q10", text: "ì—°ì¸ì—ê²Œ 'ì‚¬ë‘ë°›ê³  ìˆë‹¤'ê³  ê°€ì¥ í¬ê²Œ ëŠë¼ëŠ” ìˆœê°„ì€?", type: "select", options: [{ value: "a", text: "ì‚¬ëŒë“¤ ì•ì—ì„œ ë‚˜ë¥¼ ìë‘ìŠ¤ëŸ½ê²Œ ì¹­ì°¬í•´ì¤„ ë•Œ (ì¸ì •í•˜ëŠ” ë§)" }, { value: "b", text: "í˜ë“¤ ë•Œ ë§ì—†ì´ ê½‰ ì•ˆì•„ì¤„ ë•Œ (ìŠ¤í‚¨ì‹­)" }, { value: "c", text: "ë‚˜ì™€ì˜ ì•½ì†ì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•˜ê³  ì‹œê°„ì„ ë‚´ì–´ì¤„ ë•Œ (í•¨ê»˜í•˜ëŠ” ì‹œê°„)" }, { value: "d", text: "ë‚´ê°€ í˜ë“  ì¼ì„ ë¬µë¬µíˆ ëŒ€ì‹  ì²˜ë¦¬í•´ì¤„ ë•Œ (ë´‰ì‚¬)" }, { value: "e", text: "ë‚´ ì·¨í–¥ì„ ê¸°ì–µí•˜ê³  ê¹œì§ ì„ ë¬¼ì„ í•´ì¤„ ë•Œ (ì„ ë¬¼)" }] },
            { gender: 'both', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q11", text: "ë°”ìœ í‰ì¼ ê·¼ë¬´ ì‹œê°„, ì—°ì¸ê³¼ì˜ ì´ìƒì ì¸ ì—°ë½ ë°©ì‹ì€?", type: "select", options: [{ value: "a", text: "í‹ˆë‚  ë•Œë§ˆë‹¤ ì¼ìƒ ê³µìœ  (ìˆ˜ì‹œë¡œ)" }, { value: "b", text: "ì ì‹¬ì‹œê°„, í‡´ê·¼ í›„ ë“± ì •í•´ì§„ ì‹œê°„ì— í†µí™” (ê·œì¹™ì )" }, { value: "c", text: "ê¸‰í•œ ìš©ê±´ì´ ìˆì„ ë•Œë§Œ ì—°ë½ (í•„ìš”ì‹œ)" }] },
            { gender: 'male', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q_m3", text: "í˜ë“  ì¼ì´ ìˆì„ ë•Œ, ì—°ì¸ì—ê²Œ ì–´ëŠ ì •ë„ê¹Œì§€ ì†”ì§í•˜ê²Œ í„¸ì–´ë†“ë‚˜ìš”?", type: "select", options: [{ value: "a", text: "ì‚¬ì†Œí•œ ê²ƒê¹Œì§€ ëª¨ë‘ ê³µìœ í•˜ë©° ìœ„ë¡œë°›ê³  ì‹¶ë‹¤" }, { value: "b", text: "ê±±ì •ì‹œí‚¬ê¹Œ ë´, ì‹¬ê°í•œ ë¬¸ì œëŠ” í˜¼ì í•´ê²°í•˜ë ¤ í•œë‹¤" }, { value: "c", text: "ëŒ€ë¶€ë¶„ í˜¼ì í•´ê²°í•˜ì§€ë§Œ, ì •ë§ í˜ë“¤ ë• ê¸°ëŒ„ë‹¤" }] },
            { gender: 'female', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q_f3", text: "ì—°ì¸ì—ê²Œ 'ë³´í˜¸ë°›ê³  ìˆë‹¤'ê³  ëŠë¼ê²Œ í•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ í–‰ë™ì€ ë¬´ì—‡ì¸ê°€ìš”?", type: "select", options: [{ value: "a", text: "ë°¤ëŠ¦ê²Œ ê·€ê°€í•  ë•Œ ë°ë¦¬ëŸ¬ ì™€ì£¼ëŠ” ë“± ë¬¼ë¦¬ì ì¸ ë³´í˜¸" }, { value: "b", text: "ë‹¤ë¥¸ ì‚¬ëŒ ì•ì—ì„œ ë‚´ í¸ì„ ë“¤ì–´ì£¼ëŠ” ë“± ì‚¬íšŒì ì¸ ë³´í˜¸" }, { value: "c", text: "ë‚´ ê°ì •ì„ ì„¸ì‹¬í•˜ê²Œ ì‚´í”¼ê³  ê³µê°í•´ì£¼ëŠ” ì •ì„œì ì¸ ë³´í˜¸" }] },
            { gender: 'both', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q19", text: "ì—°ì¸ì´ ë‹¹ì‹ ì—ê²Œ ë§í•˜ì§€ ì•Šê³ , ì¹œí•œ ì´ì„± ì¹œêµ¬ì™€ ë‹¨ë‘˜ì´ ì €ë… ì‹ì‚¬ë¥¼ í•œ ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ê°ì •ì€?", type: "range", min: 1, max: 5, default: 3, labels: ["(ì¿¨í•¨) ê·¸ëŸ´ ìˆ˜ ìˆì§€", "(í™”ë‚¨) ì–´ë–»ê²Œ ë§ë„ ì•ˆ í•´?"] },
        ];

        const partInfo = {
            "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)": { title: "ê°€ì¹˜ê´€ ê¶í•©", icon: "ğŸ§­", color: "green" },
            "Part 2: íƒ€ê³ ë‚œ ë‹¤ë¦„ (ì„±ê²©/ê¸°ì§ˆ)": { title: "ì„±ê²© ê¶í•©", icon: "ğŸ­", color: "purple" },
            "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)": { title: "ë¼ì´í”„ìŠ¤íƒ€ì¼ ê¶í•©", icon: "ğŸ¡", color: "yellow" },
            "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)": { title: "ì†Œí†µ ë°©ì‹ ê¶í•©", icon: "â¤ï¸", color: "red" }
        };

        // --- UI Rendering Functions ---
        function renderQuestions() {
            const maleForm = document.getElementById('male-form');
            const femaleForm = document.getElementById('female-form');
            maleForm.innerHTML = '';
            femaleForm.innerHTML = '';
            let currentPartMale = "";
            let currentPartFemale = "";

            questions.forEach(q => {
                if (q.gender === 'both' || q.gender === 'male') {
                    if (q.part !== currentPartMale) {
                        currentPartMale = q.part;
                        maleForm.innerHTML += `<h3 class="text-xl font-semibold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">${partInfo[currentPartMale].icon} ${currentPartMale}</h3>`;
                    }
                    maleForm.innerHTML += createQuestionHTML(q, 'male');
                }
                
                if (q.gender === 'both' || q.gender === 'female') {
                     if (q.part !== currentPartFemale) {
                        currentPartFemale = q.part;
                        femaleForm.innerHTML += `<h3 class="text-xl font-semibold text-pink-700 border-b-2 border-pink-200 pb-2 mb-4">${partInfo[currentPartFemale].icon} ${currentPartFemale}</h3>`;
                    }
                    femaleForm.innerHTML += createQuestionHTML(q, 'female');
                }
            });

            document.querySelectorAll('input[type="range"]').forEach(range => {
                const valueSpan = document.getElementById(`${range.id}-value`);
                if(valueSpan) valueSpan.textContent = range.value;
                range.addEventListener('input', (event) => {
                    const targetValueSpan = document.getElementById(`${event.target.id}-value`);
                    if(targetValueSpan) targetValueSpan.textContent = event.target.value;
                });
            });
        }
        
        function createQuestionHTML(q, gender) {
            const isSpecific = q.gender !== 'both';
            const specificClass = isSpecific ? 'gender-specific-q' : '';
            const specificTag = isSpecific ? `<span class="text-xs font-bold text-white bg-indigo-500 px-2 py-1 rounded-full ml-2">íŠ¹í™” ì§ˆë¬¸</span>` : '';

            return `
                <div class="question-card bg-white p-4 rounded-lg shadow ${specificClass}">
                    <label for="${q.id}-${gender}" class="block text-base font-medium text-gray-700 mb-3">${q.text} ${specificTag}</label>
                    ${q.type === 'select' ? createSelect(q, gender) : createRange(q, gender)}
                </div>`;
        }


        function createSelect(q, gender) {
            const optionsHTML = q.options.map(opt => `<option value="${opt.value}">${opt.text}</option>`).join('');
            return `<select id="${q.id}-${gender}" name="${q.id}" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white">
                        ${optionsHTML}
                    </select>`;
        }

        function createRange(q, gender) {
            return `<div class="flex flex-col items-center">
                        <input type="range" id="${q.id}-${gender}" name="${q.id}" min="${q.min}" max="${q.max}" value="${q.default}" class="w-full">
                        <div class="w-full flex justify-between text-xs text-gray-500 px-1 mt-1">
                            <span>${q.labels[0]}</span>
                            <span id="${q.id}-${gender}-value" class="font-bold text-indigo-600 text-sm">${q.default}</span>
                            <span>${q.labels[1]}</span>
                        </div>
                    </div>`;
        }

        // --- Matching Algorithm Logic ---
        function calculateResults() {
            const maleAnswers = getAnswers('male');
            const femaleAnswers = getAnswers('female');
            
            const results = {};
            let allScores = [];
            const commonQuestions = questions.filter(q => q.gender === 'both');

            for (const part in partInfo) {
                const partQuestions = commonQuestions.filter(q => q.part === part);
                if (partQuestions.length === 0) continue;

                const partScores = partQuestions.map(q => {
                    const maleAnswer = maleAnswers[q.id];
                    const femaleAnswer = femaleAnswers[q.id];
                    return calculateScore(q, maleAnswer, femaleAnswer);
                });
                
                const averageScore = partScores.reduce((a, b) => a + b, 0) / partScores.length;
                results[part] = {
                    score: Math.round(averageScore),
                    comment: getComment(part, Math.round(averageScore))
                };
                allScores.push(...partScores);
            }
            
            const overallAverage = allScores.reduce((a, b) => a + b, 0) / allScores.length;
            results.overall = {
                score: Math.round(overallAverage),
                comment: getOverallComment(Math.round(overallAverage))
            };

            displayResults(results, maleAnswers, femaleAnswers);
        }

        function getAnswers(gender) {
            const form = document.getElementById(`${gender}-form`);
            const formData = new FormData(form);
            const answers = {};
            for (let [key, value] of formData.entries()) {
                answers[key] = value;
            }
            return answers;
        }

        function calculateScore(question, answer1, answer2) {
            if (question.id === 'q_child_plan') {
                const scoreMap = { 'a': 1, 'b': 2, 'c': 4, 'd': 3 }; // bì™€ dëŠ” ìœ ì‚¬, cëŠ” ê°€ì¥ ë‹¤ë¦„
                const diff = Math.abs(scoreMap[answer1] - scoreMap[answer2]);
                return Math.max(0, 100 - diff * 33);
            }
            if (question.type === 'select') {
                return answer1 === answer2 ? 100 : 0;
            } else if (question.type === 'range') {
                const diff = Math.abs(parseInt(answer1) - parseInt(answer2));
                const maxDiff = question.max - question.min;
                return 100 * (1 - (diff / maxDiff));
            }
            return 0;
        }

        // --- Result Generation and Display ---
        function getComment(part, score) {
            if (score >= 80) return "ì•„ì£¼ ì˜ ë§ì•„ìš”! ë‘ ë¶„ì€ ì´ ë¶€ë¶„ì—ì„œ ì„œë¡œë¥¼ ê¹Šì´ ì´í•´í•˜ê³  í¸ì•ˆí•¨ì„ ëŠë‚„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.";
            if (score >= 60) return "ì˜ ë§ëŠ” í¸ì´ì—ìš”. ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆì§€ë§Œ, ì„œë¡œì—ê²Œ ê¸ì •ì ì¸ ìê·¹ì´ ë  ìˆ˜ ìˆëŠ” ì§€ì ì…ë‹ˆë‹¤.";
            if (score >= 40) return "ì„œë¡œ ë‹¤ë¥¸ ì ì´ ìˆë„¤ìš”. ì´ ì°¨ì´ê°€ ê°ˆë“±ì˜ ì›ì¸ì´ ë  ìˆ˜ë„ ìˆì§€ë§Œ, ëŒ€í™”ë¥¼ í†µí•´ ì¶©ë¶„íˆ ë§ì¶°ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            return "ìƒë‹¹í•œ ì°¨ì´ê°€ ë°œê²¬ë˜ì—ˆì–´ìš”. ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ì„œë¡œì˜ ë‹¤ë¦„ì„ ì¸ì •í•˜ê³  ì¡´ì¤‘í•˜ëŠ” ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•´ ë³´ì…ë‹ˆë‹¤.";
        }
        
        function getOverallComment(score) {
            if (score >= 85) return "í™˜ìƒì˜ ì»¤í”Œ! ì„œë¡œì—ê²Œ ì•ˆì •ê°ì„ ì£¼ëŠ”, í¸ì•ˆí•œ ì†Œìš¸ë©”ì´íŠ¸ê°€ ë  ìˆ˜ ìˆì–´ìš”!";
            if (score >= 70) return "ë©‹ì§„ ì¡°í•©ì´ì—ìš”! ì„œë¡œì˜ ë‹¤ë¦„ì„ ë³´ì™„í•´ì£¼ë©° í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆëŠ” ê´€ê³„ì…ë‹ˆë‹¤.";
            if (score >= 50) return "ì•Œì•„ê°€ëŠ” ì¬ë¯¸ê°€ ìˆê² ì–´ìš”! ê³µí†µì ê³¼ ì°¨ì´ì ì„ ë°œê²¬í•˜ë©° í¥ë¯¸ë¡œìš´ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            return "ë„ì „ì ì¸ ê´€ê³„ê°€ ë  ìˆ˜ ìˆì–´ìš”! ë§ì€ ëŒ€í™”ì™€ ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ë§Œ, ê·¸ë§Œí¼ ì„œë¡œì—ê²Œì„œ ë§ì€ ê²ƒì„ ë°°ìš¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.";
        }

        function displayResults(results, maleAnswers, femaleAnswers) {
            document.getElementById('overall-score').textContent = `${results.overall.score}ì `;
            document.getElementById('overall-comment').textContent = results.overall.comment;

            const container = document.getElementById('detailed-results-container');
            container.innerHTML = '';
            for (const part in partInfo) {
                if(results[part]){
                    const info = partInfo[part];
                    const result = results[part];
                    container.innerHTML += createResultCard(info, result);
                }
            }
            
            for (const part in partInfo) {
                if(results[part]){
                    const info = partInfo[part];
                    const result = results[part];
                    const progressBar = document.querySelector(`#bar-${info.color}`);
                    setTimeout(() => {
                        if(progressBar) progressBar.style.width = `${result.score}%`;
                    }, 100);
                }
            }
            
            document.getElementById('ice-breaking-questions').innerHTML = generateIceBreakers(maleAnswers, femaleAnswers);

            document.getElementById('result-modal').classList.remove('hidden');
            document.getElementById('result-modal').classList.add('flex');
            setTimeout(() => {
                document.getElementById('result-content').classList.remove('scale-95');
                document.getElementById('result-content').classList.add('scale-100');
            }, 50);
        }
        
        function createResultCard(info, result) {
            const colorClasses = {
                green: { bg: 'bg-green-100', border: 'border-green-300', bar: 'bg-green-500', text: 'text-green-800' },
                purple: { bg: 'bg-purple-100', border: 'border-purple-300', bar: 'bg-purple-500', text: 'text-purple-800' },
                yellow: { bg: 'bg-yellow-100', border: 'border-yellow-300', bar: 'bg-yellow-500', text: 'text-yellow-800' },
                red: { bg: 'bg-red-100', border: 'border-red-300', bar: 'bg-red-500', text: 'text-red-800' },
            };
            const c = colorClasses[info.color];

            return `
                <div class="${c.bg} ${c.border} border-l-4 p-4 rounded-lg">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-lg font-bold ${c.text}">${info.icon} ${info.title}</h3>
                        <span class="font-bold text-xl ${c.text}">${result.score}ì </span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="bar-${info.color}" class="result-bar ${c.bar} h-2.5 rounded-full" style="width: 0%;"></div>
                    </div>
                    <p class="mt-2 text-sm ${c.text}">${result.comment}</p>
                </div>
            `;
        }
        
        // --- Icebreaker Generation Logic (v6: Detailed) ---
        function generateIceBreakers(maleAnswers, femaleAnswers) {
            let suggestions = [];

            const getAnswerText = (qId, answerValue) => {
                const question = questions.find(q => q.id === qId);
                if (!question) return answerValue;
                const option = question.options.find(o => o.value === answerValue);
                return option ? `"${option.text}"` : answerValue;
            };

            // 1. ìë…€ ê³„íšì— ëŒ€í•œ ëŒ€í™”
            const q_child_male_text = getAnswerText('q_child_plan', maleAnswers.q_child_plan);
            const q_child_female_text = getAnswerText('q_child_plan', femaleAnswers.q_child_plan);
            if (maleAnswers.q_child_plan !== femaleAnswers.q_child_plan) {
                 suggestions.push({
                    title: "ğŸ§­ ê°€ì¹˜ê´€: ë¯¸ë˜ì˜ ê°€ì¡±ì„ ê·¸ë¦¬ë‹¤",
                    text: `ìë…€ ê³„íšì— ëŒ€í•´ ë‚¨ì„±ë¶„ì€ ${q_child_male_text}, ì—¬ì„±ë¶„ì€ ${q_child_female_text}(ì´)ë¼ê³  ë‹µí–ˆì–´ìš”. ì´ ì£¼ì œëŠ” ê´€ê³„ì—ì„œ ë§¤ìš° ì¤‘ìš”í•˜ë¯€ë¡œ, ë‘ ë¶„ì´ ìƒê°í•˜ëŠ” ì´ìƒì ì¸ ê°€ì¡±ì˜ ëª¨ìŠµê³¼ ë¯¸ë˜ì— ëŒ€í•´ ì†”ì§í•œ ëŒ€í™”ë¥¼ ë‚˜ëˆ ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”.`
                });
            }

            // 2. ë””ì €íŠ¸ ì·¨í–¥ì— ëŒ€í•œ ëŒ€í™”
            const q_dessert_male_habit = maleAnswers.q_dessert_habit;
            const q_dessert_female_habit = femaleAnswers.q_dessert_habit;
            const q_dessert_male_pref = getAnswerText('q_dessert_preference', maleAnswers.q_dessert_preference);
            const q_dessert_female_pref = getAnswerText('q_dessert_preference', femaleAnswers.q_dessert_preference);

            if (q_dessert_male_habit !== 'c' && q_dessert_female_habit !== 'c') { // ë‘˜ ë‹¤ ë””ì €íŠ¸ë¥¼ ë¨¹ëŠ”ë‹¤ë©´
                if (maleAnswers.q_dessert_preference === femaleAnswers.q_dessert_preference && maleAnswers.q_dessert_preference !== 'd') {
                    suggestions.push({
                        title: "ğŸ° ë‹¬ì½¤í•œ ìš°ë¦¬ ì‚¬ì´: ë””ì €íŠ¸ ì·¨í–¥",
                        text: `ë‘ ë¶„ ë‹¤ ${q_dessert_male_pref} ë””ì €íŠ¸ë¥¼ ì¢‹ì•„í•˜ì‹œëŠ”êµ°ìš”! ì‹ì‚¬ í›„ í•¨ê»˜ ë‹¬ì½¤í•œ ì‹œê°„ì„ ë³´ë‚´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”? ì„œë¡œì˜ ì¸ìƒ ë””ì €íŠ¸ ì¹´í˜ë¥¼ ì¶”ì²œí•´ì£¼ì„¸ìš”!`
                    });
                } else if (maleAnswers.q_dessert_preference !== femaleAnswers.q_dessert_preference && maleAnswers.q_dessert_preference !== 'd' && femaleAnswers.q_dessert_preference !== 'd') {
                    suggestions.push({
                        title: "ğŸ° ë‹¬ì½¤í•œ ìš°ë¦¬ ì‚¬ì´: ì„œë¡œì˜ ìµœì•  ë””ì €íŠ¸",
                        text: `ë””ì €íŠ¸ ì·¨í–¥ì´ ë‹¤ë¥´ì‹œë„¤ìš”! ë‚¨ì„±ë¶„ì€ ${q_dessert_male_pref}, ì—¬ì„±ë¶„ì€ ${q_dessert_female_pref} ìŠ¤íƒ€ì¼ì„ ì¢‹ì•„í•´ìš”. ê°ì ìì‹ ì˜ 'ìµœì• ' ë””ì €íŠ¸ ê°€ê²Œì— ìƒëŒ€ë¥¼ ë°ë ¤ê°€ ìƒˆë¡œìš´ ë§›ì„ ê²½í—˜ì‹œì¼œì£¼ëŠ” ë°ì´íŠ¸ëŠ” ì–´ë–¨ê¹Œìš”?`
                    });
                }
            }
            
            // 3. ì—¬ì„± íŠ¹í™” ì§ˆë¬¸ -> ë‚¨ì„±ì—ê²Œ ëŒ€í™” ì£¼ì œë¡œ ì œì‹œ
            const q_f2_answer = getAnswerText('q_f2', femaleAnswers.q_f2);
            suggestions.push({
                title: "ğŸ‘©â€ğŸ¦° ì—¬ì„±ë¶„ì˜ ìƒê°: í•¨ê»˜ ê¾¸ë¦¬ëŠ” ìš°ë¦¬ ì§‘",
                text: `ì—¬ì„±ë¶„ì€ 'ë§ë²Œì´ ì‹œ ì´ìƒì ì¸ ê°€ì‚¬ ë¶„ë‹´'ì— ëŒ€í•´ ${q_f2_answer} ì´ë¼ê³  ë‹µí–ˆì–´ìš”. ì´ ë‹µë³€ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•˜ì‹œë‚˜ìš”? ë‘ ë¶„ì´ í•¨ê»˜ ë§Œë“¤ì–´ê°ˆ í–‰ë³µí•œ ê°€ì •ì„ ìœ„í•´, ì§‘ì•ˆì¼ì— ëŒ€í•œ ì„œë¡œì˜ ìƒê°ê³¼ ê·œì¹™ì„ ë¯¸ë¦¬ ì´ì•¼ê¸°í•´ë³´ëŠ” ê²ƒì´ ì¢‹ì•„ìš”.`
            });
            
            // 4. ë‚¨ì„± íŠ¹í™” ì§ˆë¬¸ -> ì—¬ì„±ì—ê²Œ ëŒ€í™” ì£¼ì œë¡œ ì œì‹œ
            const q_m3_answer = getAnswerText('q_m3', maleAnswers.q_m3);
            suggestions.push({
                title: "ğŸ‘¨â€ğŸ¦± ë‚¨ì„±ë¶„ì˜ ìƒê°: ê·¸ì˜ ì†ë§ˆìŒ",
                text: `ë‚¨ì„±ë¶„ì€ 'í˜ë“  ì¼ì´ ìˆì„ ë•Œ ì—°ì¸ì—ê²Œ í„¸ì–´ë†“ëŠ” ì •ë„'ì— ëŒ€í•´ ${q_m3_answer} ì´ë¼ê³  ë‹µí–ˆì–´ìš”. ê·¸ê°€ ì–¸ì œ ìœ„ë¡œê°€ í•„ìš”í•˜ê³ , ë˜ ì–¸ì œ í˜¼ìë§Œì˜ ì‹œê°„ì´ í•„ìš”í•œì§€ ì´í•´í•´ì¤€ë‹¤ë©´ ë”ìš± ê¹Šì€ ê´€ê³„ê°€ ë  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.`
            });


            return suggestions.map(s => `
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h4 class="font-bold text-gray-800 text-lg mb-2">${s.title}</h4>
                    <p class="text-gray-600 text-base">${s.text}</p>
                </div>
            `).join('');
        }

        // --- Event Listeners ---
        document.getElementById('view-result-btn').addEventListener('click', calculateResults);
        document.getElementById('close-modal-btn').addEventListener('click', () => {
            document.getElementById('result-content').classList.add('scale-95');
            document.getElementById('result-content').classList.remove('scale-100');
            setTimeout(() => {
                document.getElementById('result-modal').classList.add('hidden');
                document.getElementById('result-modal').classList.remove('flex');
            }, 300);
        });

        // Initial Render
        window.onload = renderQuestions;
    </script>
</body>
</html>
