
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²°í•˜ë‹¤ ì£¼ê´€ì  ì„ í˜¸ ì„¤ë¬¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .question-card {
            transition: all 0.3s ease-in-out;
        }
        .result-bar {
            transition: width 1s ease-in-out;
        }
        .gender-specific-q {
            border-left: 4px solid #6366f1;
            background-color: #eef2ff;
        }
        /* Custom styles for range input */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            margin: 7.3px 0;
            background: transparent;
        }
        input[type=range]:focus {
            outline: none;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 11.4px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 5px;
        }
        input[type=range]::-webkit-slider-thumb {
            height: 26px;
            width: 26px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            -webkit-appearance: none;
            margin-top: -7.3px;
        }
        input[type=range]:focus::-webkit-slider-runnable-track {
            background: #d1d5db;
        }
        input[type=range]::-moz-range-track {
            width: 100%;
            height: 11.4px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 5px;
        }
        input[type=range]::-moz-range-thumb {
            height: 26px;
            width: 26px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <!-- Header -->
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-indigo-600">ê²°í•˜ë‹¤</h1>
            <p class="text-lg md:text-xl text-gray-600 mt-2">ì£¼ê´€ì  ì„ í˜¸ ì„¤ë¬¸ (v4: ì„±ë³„ íŠ¹í™” ì§ˆë¬¸)</p>
        </header>

        <!-- Input Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Male Form -->
            <div class="bg-blue-50 p-6 rounded-2xl shadow-md border border-blue-200">
                <h2 class="text-2xl font-bold text-center mb-6 text-blue-800">ğŸ‘¨â€ğŸ¦± ë‚¨ì„±</h2>
                <form id="male-form" class="space-y-8">
                    <!-- Questions will be dynamically inserted here -->
                </form>
            </div>

            <!-- Female Form -->
            <div class="bg-pink-50 p-6 rounded-2xl shadow-md border border-pink-200">
                <h2 class="text-2xl font-bold text-center mb-6 text-pink-800">ğŸ‘©â€ğŸ¦° ì—¬ì„±</h2>
                <form id="female-form" class="space-y-8">
                    <!-- Questions will be dynamically inserted here -->
                </form>
            </div>
        </div>

        <!-- Action Button -->
        <div class="text-center mt-8 md:mt-12">
            <button id="view-result-btn" class="bg-indigo-600 text-white font-bold py-4 px-8 rounded-full text-xl hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 transition-transform transform hover:scale-105">
                ê¶í•© ê²°ê³¼ ë³´ê¸°
            </button>
        </div>

        <!-- Result Modal -->
        <div id="result-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
            <div id="result-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-6 md:p-8 relative transform scale-95 transition-transform duration-300">
                <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
                
                <div class="text-center mb-6">
                    <h2 class="text-3xl font-bold text-indigo-600">ê´€ê³„ ê¶í•© ë¦¬í¬íŠ¸</h2>
                </div>

                <!-- Overall Score -->
                <div class="bg-indigo-50 border-2 border-indigo-200 rounded-xl p-6 text-center mb-8">
                    <p class="text-lg text-indigo-800 mb-2">ë‘ ë¶„ì˜ ì¢…í•© ê¶í•© ì§€ìˆ˜ëŠ”?</p>
                    <p id="overall-score" class="text-7xl font-extrabold text-indigo-600">0ì </p>
                    <p id="overall-comment" class="mt-3 text-base text-indigo-700 font-medium"></p>
                    <p class="text-xs text-gray-500 mt-2">* ì¢…í•© ê¶í•©ì€ ê³µí†µ ì§ˆë¬¸ì„ ë°”íƒ•ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.</p>
                </div>

                <!-- Detailed Scores -->
                <div class="space-y-6" id="detailed-results-container">
                    <!-- Detailed results will be inserted here -->
                </div>

                <!-- Ice Breaking Questions -->
                 <div class="mt-10 pt-6 border-t-2 border-gray-200">
                    <h3 class="text-2xl font-bold text-center text-gray-800 mb-6">ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”! ğŸ’¬</h3>
                    <div id="ice-breaking-questions" class="space-y-5">
                        <!-- Ice breakers will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            // Part 1: ê°€ì¹˜ê´€
            { gender: 'both', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q1", text: "1ì–µ ì›ì˜ ë³´ë„ˆìŠ¤ê°€ ìƒê²¼ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„ íƒì€?", type: "select", options: [{ value: "a", text: "ì¦‰ì‹œ í‰ì†Œ ê¿ˆê¾¸ë˜ ì°¨ë¥¼ ê³„ì•½í•œë‹¤ (í˜„ì¬ì˜ ë§Œì¡±)" }, { value: "b", text: "ì•ˆì •ì ì¸ ìš°ëŸ‰ì£¼ì— ì¥ê¸° íˆ¬ìí•œë‹¤ (ë¯¸ë˜ì˜ ì•ˆì •)" }, { value: "c", text: "ë¶€ëª¨ë‹˜ê»˜ ì ˆë°˜ì„ ë“œë¦¬ê³  ë‚˜ë¨¸ì§€ëŠ” ì €ì¶•í•œë‹¤ (ê°€ì¡±ê³¼ ê´€ê³„)" }, { value: "d", text: "MBA ì§„í•™ ë“± ì»¤ë¦¬ì–´ ë°œì „ì„ ìœ„í•´ ì‚¬ìš©í•œë‹¤ (ì„±ì¥ê³¼ ì„±ì·¨)" }] },
            { gender: 'both', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q13", text: "ê²°í˜¼ í›„ ì¬ì‚° ê´€ë¦¬ ë°©ì‹ì— ëŒ€í•œ ë‹¹ì‹ ì˜ ìƒê°ì€?", type: "select", options: [{ value: "a", text: "ê°ì ìˆ˜ì…ì€ ê°ì ê´€ë¦¬, ìƒí™œë¹„ë§Œ ê³µë™ ë¶€ë‹´ (ë…ë¦½ì„±)" }, { value: "b", text: "ëª¨ë“  ìˆ˜ì…ì„ í•©ì³ ê³µë™ í†µì¥ìœ¼ë¡œ ê´€ë¦¬ (íˆ¬ëª…ì„±ê³¼ ê³µë™ì²´)" }, { value: "c", text: "ìˆ˜ì…ì´ ë” ë†’ì€ ìª½ì´ ì£¼ë„ì ìœ¼ë¡œ ê´€ë¦¬ (íš¨ìœ¨ì„±)" }] },
            { gender: 'male', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q_m1", text: "ì—°ì¸ì´ ë‹¹ì‹ ì˜ ì†Œë“ì´ë‚˜ ì§ì—… ì•ˆì •ì„±ì— ëŒ€í•´ ë¶ˆì•ˆê°ì„ ë‚´ë¹„ì¹œë‹¤ë©´, ë‹¹ì‹ ì˜ ë°˜ì‘ì€?", type: "select", options: [{ value: "a", text: "ë¶ˆì•ˆí•¨ì„ ê³µê°í•˜ë©°, í•¨ê»˜ ë¯¸ë˜ ê³„íšì„ ì„¸ìš´ë‹¤" }, { value: "b", text: "ë‚´ ëŠ¥ë ¥ì„ ë¯¿ì–´ì£¼ì§€ ì•ŠëŠ” ê²ƒ ê°™ì•„ ì„œìš´í•˜ë‹¤" }, { value: "c", text: "ë” ì•ˆì •ì ì¸ ì§ì¥ì„ ì•Œì•„ë´ì•¼ í•˜ë‚˜ ê³ ë¯¼í•œë‹¤" }] },
            { gender: 'female', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q_f1", text: "ê²°í˜¼ì´ë‚˜ ì¶œì‚°ìœ¼ë¡œ ì¸í•´ ì»¤ë¦¬ì–´ê°€ ì¤‘ë‹¨ë  ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•˜ì‹œë‚˜ìš”?", type: "select", options: [{ value: "a", text: "ì»¤ë¦¬ì–´ë³´ë‹¤ ê°€ì •ì´ ì¤‘ìš”í•˜ë¯€ë¡œ, ê°ìˆ˜í•  ìˆ˜ ìˆë‹¤" }, { value: "b", text: "ê²½ë ¥ ë‹¨ì ˆì€ ì•ˆëœë‹¤. íŒŒíŠ¸ë„ˆì™€ í•¨ê»˜ í•´ê²°ì±…ì„ ì°¾ì„ ê²ƒì´ë‹¤" }, { value: "c", text: "ì»¤ë¦¬ì–´ë¥¼ ìœ„í•´ ê²°í˜¼/ì¶œì‚°ì„ ë¯¸ë£¨ê±°ë‚˜ í¬ê¸°í•  ìˆ˜ ìˆë‹¤" }] },
            { gender: 'both', part: "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)", id: "q2", text: "ë‹¹ì‹ ì´ ìƒê°í•˜ëŠ” 'ê°€ì¥ ì´ìƒì ì¸ ë…¸ë…„ì˜ ëª¨ìŠµ'ì€?", type: "select", options: [{ value: "a", text: "ì‚¬íšŒì ìœ¼ë¡œ ì¡´ê²½ë°›ìœ¼ë©° ì „ë¬¸ì„±ì„ ë°œíœ˜í•˜ëŠ” ì‚¶" }, { value: "b", text: "ì†ì£¼ë“¤ì—ê²Œ ë‘˜ëŸ¬ì‹¸ì—¬ í™”ëª©í•œ ê°€ì •ì„ ê¾¸ë¦¬ëŠ” ì‚¶" }, { value: "c", text: "ë°°ìš°ìì™€ ì„¸ê³„ ì¼ì£¼ë¥¼ í•˜ë©° ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ëŠ” ì‚¶" }, { value: "d", text: "ì¡°ìš©í•œ ì‹œê³¨ì—ì„œ í…ƒë°­ì„ ê°€ê¾¸ë©° í‰ì˜¨í•˜ê²Œ ì‚¬ëŠ” ì‚¶" }] },

            // Part 2: ì„±ê²©/ê¸°ì§ˆ
            { gender: 'both', part: "Part 2: íƒ€ê³ ë‚œ ë‹¤ë¦„ (ì„±ê²©/ê¸°ì§ˆ)", id: "q4", text: "ë”ì°í•˜ê²Œ í˜ë“  í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤. ì§‘ì— ëŒì•„ì˜¨ ë‹¹ì‹ ì˜ ì²« í–‰ë™ì€?", type: "select", options: [{ value: "a", text: "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ì—ê²Œ ì „í™”í•´ ì˜¤ëŠ˜ ì¼ì„ ì „ë¶€ í„¸ì–´ë†“ëŠ”ë‹¤ (ì™¸í–¥/í‘œì¶œí˜•)" }, { value: "b", text: "ì•„ë¬´ë„ ì—†ëŠ” ë°©ì—ì„œ ì¢‹ì•„í•˜ëŠ” ì˜í™”ë¥¼ ë³´ë©° í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°–ëŠ”ë‹¤ (ë‚´í–¥/ì¶©ì „í˜•)" }, { value: "c", text: "ë•€ í˜ë ¤ ìš´ë™í•˜ê±°ë‚˜, ëª°ë‘í•  ìˆ˜ ìˆëŠ” ì·¨ë¯¸ í™œë™ì„ í•œë‹¤ (í™œë™/ì „í™˜í˜•)" }, { value: "d", text: "ë”°ëœ»í•œ ë¬¼ë¡œ ìƒ¤ì›Œí•˜ê³ , ì¢‹ì•„í•˜ëŠ” ìŒì‹ì„ ì‹œì¼œ ë¨¹ëŠ”ë‹¤ (ê°ê°/ë³´ìƒí˜•)" }] },
            { gender: 'both', part: "Part 2: íƒ€ê³ ë‚œ ë‹¤ë¦„ (ì„±ê²©/ê¸°ì§ˆ)", id: "q5", text: "ì—°ì¸ê³¼ ê°ˆë“±ì´ ìƒê²¼ì„ ë•Œ, ë‹¹ì‹ ì˜ ì¼ë°˜ì ì¸ ë°˜ì‘ì€?", type: "select", options: [{ value: "a", text: "ê°ì •ì´ ê²©í•´ì§€ë”ë¼ë„ ê·¸ ìë¦¬ì—ì„œ ë°”ë¡œ ëŒ€í™”ë¡œ í’€ì–´ì•¼ í•œë‹¤ (ì¦‰ì‹œ í•´ê²°í˜•)" }, { value: "b", text: "ì¼ë‹¨ ê°ì ìƒê°í•  ì‹œê°„ì„ ê°–ê³ , ê°ì •ì´ ê°€ë¼ì•‰ìœ¼ë©´ ëŒ€í™”í•œë‹¤ (ìˆ™ê³  í›„ í•´ê²°í˜•)" }, { value: "c", "text": "ìƒëŒ€ë°©ì˜ ê¸°ë¶„ì´ í’€ë¦´ ë•Œê¹Œì§€ ì¼ë‹¨ ë§ì¶°ì£¼ê³ , ë‚˜ì¤‘ì— ë‹¤ì‹œ ì´ì•¼ê¸°í•œë‹¤ (í™”í•© ìš°ì„ í˜•)" }, { value: "d", text: "ë¬¸ì œë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì–¸ê¸‰í•˜ê¸°ë³´ë‹¤, ì‹œê°„ì´ í•´ê²°í•´ì£¼ê¸¸ ê¸°ë‹¤ë¦°ë‹¤ (íšŒí”¼í˜•)" }] },
            { gender: 'both', part: "Part 2: íƒ€ê³ ë‚œ ë‹¤ë¦„ (ì„±ê²©/ê¸°ì§ˆ)", id: "q15", text: "ì—°ì¸ì´ ì£¼ë§ì— 'ì•„ë¬´ ê³„íš ì—†ì´ ê·¸ëƒ¥ ë– ë‚˜ì!'ë¼ê³  ì œì•ˆí•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì†ë§ˆìŒì€?", type: "range", min: 1, max: 5, default: 3, labels: ["(ë¶ˆì•ˆ) ìˆ™ì†ŒëŠ”? ì˜ˆì‚°ì€?", "(ì„¤ë ˜) ë„ˆë¬´ ì‹ ë‚˜!"] },
            
            // Part 3: ë¼ì´í”„ìŠ¤íƒ€ì¼
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q7", text: "ì•„ë¬´ ì•½ì† ì—†ëŠ” ì´ìƒì ì¸ í† ìš”ì¼ í•˜ë£¨ëŠ”?", type: "select", options: [{ value: "a", text: "ëŠ¦ì  í›„ ë°°ë‹¬ ìŒì‹ê³¼ í•¨ê»˜ ë„·í”Œë¦­ìŠ¤ ì •ì£¼í–‰ (ì™„ì „í•œ íœ´ì‹)" }, { value: "b", text: "ì•„ì¹¨ ì¼ì° ì¼ì–´ë‚˜ ë“±ì‚°ì´ë‚˜ ì„œí•‘ ì¦ê¸°ê¸° (ì•„ì›ƒë„ì–´ ì•¡í‹°ë¹„í‹°)" }, { value: "c", text: "ë¯¸ìˆ ê´€ì´ë‚˜ ë…ë¦½ ì„œì ì— ë“¤ëŸ¬ ì˜ê° ì±„ìš°ê¸° (ë¬¸í™”/ì˜ˆìˆ )" }, { value: "d", text: "í‰ì†Œ ê°€ê³  ì‹¶ë˜ ë§›ì§‘, í•«í”Œë ˆì´ìŠ¤ ì¹´í˜ íˆ¬ì–´ (íŠ¸ë Œë“œ/ë¯¸ì‹)" }] },
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q17", text: "ì¼ì£¼ì¼ê°„ì˜ íœ´ê°€, ë‹¹ì‹ ì´ ì„ íƒí•  ì—¬í–‰ì§€ëŠ”?", type: "select", options: [{ value: "a", text: "ëª°ë””ë¸Œì˜ ê³ ê¸‰ ë¦¬ì¡°íŠ¸ì—ì„œ ì¦ê¸°ëŠ” í”„ë¼ì´ë¹— íœ´ì–‘ (ëŸ­ì…”ë¦¬/íë§)" }, { value: "b", text: "í˜ë£¨ ë§ˆì¶”í”½ì¶” íŠ¸ë ˆí‚¹ê³¼ í˜„ì§€ ë¬¸í™” ì²´í—˜ (ëª¨í—˜/ë„ì „)" }, { value: "c", text: "íŒŒë¦¬ ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€ê³¼ ë¯¸ìŠë­ ë ˆìŠ¤í† ë‘ íˆ¬ì–´ (ë„ì‹œ/ë¬¸í™”)" }, { value: "d", text: "ì œì£¼ë„ì—ì„œ ì°¨ë¥¼ ë ŒíŠ¸í•´ ë°œê¸¸ ë‹¿ëŠ” ëŒ€ë¡œ ì—¬í–‰ (ììœ /ì¦‰í¥)" }] },
            { gender: 'male', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q_m2", text: "ê°œì¸ì ì¸ ì·¨ë¯¸(ê²Œì„, ë‚šì‹œ, ë™í˜¸íšŒ ë“±)ì— ì£¼ë§ ì‹œê°„ì„ ì˜¨ì „íˆ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ëŒ€í•´ ì—°ì¸ì´ ì„œìš´í•´í•œë‹¤ë©´?", type: "select", options: [{ value: "a", text: "ì—°ì¸ê³¼ì˜ ì‹œê°„ì´ ë” ì¤‘ìš”í•˜ë¯€ë¡œ, ì·¨ë¯¸ë¥¼ ì¤„ì¸ë‹¤" }, { value: "b", text: "ì„œìš´í•¨ì„ í’€ì–´ì£¼ê³ , ì·¨ë¯¸ì˜ ì¤‘ìš”ì„±ì„ ì„¤ëª…í•˜ë©° íƒ€í˜‘ì ì„ ì°¾ëŠ”ë‹¤" }, { value: "c", text: "ê°œì¸ì˜ ì‹œê°„ì€ ì¡´ì¤‘ë°›ì•„ì•¼ í•œë‹¤ê³  ì£¼ì¥í•œë‹¤" }] },
            { gender: 'female', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q_f2", text: "ë§ë²Œì´ë¥¼ í•  ê²½ìš°, ê°€ì‚¬ ë¶„ë‹´ì˜ ê°€ì¥ ì´ìƒì ì¸ ëª¨ìŠµì€?", type: "select", options: [{ value: "a", text: "ì‹œê°„ ì—¬ìœ ê°€ ìˆëŠ” ì‚¬ëŒì´ ë” ë§ì´ í•œë‹¤" }, { value: "b", text: "ê°ì ì˜í•˜ëŠ” ì¼ì„ ë¶„ë‹´í•´ì„œ ì²˜ë¦¬í•œë‹¤" }, { value: "c", text: "5:5ë¡œ ê³µí‰í•˜ê²Œ, ë˜ëŠ” ê·œì¹™ì„ ì •í•´ì„œ ë¶„ë‹´í•œë‹¤" }] },
            { gender: 'both', part: "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)", id: "q8", text: "í”¼ê³¤í•˜ê²Œ í‡´ê·¼í–ˆëŠ”ë°, ì„¤ê±°ì§“ê±°ë¦¬ê°€ ìŒ“ì—¬ìˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€?", type: "range", min: 1, max: 5, default: 3, labels: ["ë‚´ì¼ë¡œ ë¯¸ë£¬ë‹¤", "í”¼ê³¤í•´ë„ ë°”ë¡œ ì¹˜ìš´ë‹¤"] },

            // Part 4: ê´€ê³„ì˜ ê¸°ìˆ 
            { gender: 'both', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q10", text: "ì—°ì¸ì—ê²Œ 'ì‚¬ë‘ë°›ê³  ìˆë‹¤'ê³  ê°€ì¥ í¬ê²Œ ëŠë¼ëŠ” ìˆœê°„ì€?", type: "select", options: [{ value: "a", text: "ì‚¬ëŒë“¤ ì•ì—ì„œ ë‚˜ë¥¼ ìë‘ìŠ¤ëŸ½ê²Œ ì¹­ì°¬í•´ì¤„ ë•Œ (ì¸ì •í•˜ëŠ” ë§)" }, { value: "b", text: "í˜ë“¤ ë•Œ ë§ì—†ì´ ê½‰ ì•ˆì•„ì¤„ ë•Œ (ìŠ¤í‚¨ì‹­)" }, { value: "c", text: "ë‚˜ì™€ì˜ ì•½ì†ì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•˜ê³  ì‹œê°„ì„ ë‚´ì–´ì¤„ ë•Œ (í•¨ê»˜í•˜ëŠ” ì‹œê°„)" }, { value: "d", text: "ë‚´ê°€ í˜ë“  ì¼ì„ ë¬µë¬µíˆ ëŒ€ì‹  ì²˜ë¦¬í•´ì¤„ ë•Œ (ë´‰ì‚¬)" }, { value: "e", text: "ë‚´ ì·¨í–¥ì„ ê¸°ì–µí•˜ê³  ê¹œì§ ì„ ë¬¼ì„ í•´ì¤„ ë•Œ (ì„ ë¬¼)" }] },
            { gender: 'both', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q11", text: "ë°”ìœ í‰ì¼ ê·¼ë¬´ ì‹œê°„, ì—°ì¸ê³¼ì˜ ì´ìƒì ì¸ ì—°ë½ ë°©ì‹ì€?", type: "select", options: [{ value: "a", text: "í‹ˆë‚  ë•Œë§ˆë‹¤ ì¼ìƒ ê³µìœ  (ìˆ˜ì‹œë¡œ)" }, { value: "b", text: "ì ì‹¬ì‹œê°„, í‡´ê·¼ í›„ ë“± ì •í•´ì§„ ì‹œê°„ì— í†µí™” (ê·œì¹™ì )" }, { value: "c", text: "ê¸‰í•œ ìš©ê±´ì´ ìˆì„ ë•Œë§Œ ì—°ë½ (í•„ìš”ì‹œ)" }] },
            { gender: 'male', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q_m3", text: "í˜ë“  ì¼ì´ ìˆì„ ë•Œ, ì—°ì¸ì—ê²Œ ì–´ëŠ ì •ë„ê¹Œì§€ ì†”ì§í•˜ê²Œ í„¸ì–´ë†“ë‚˜ìš”?", type: "select", options: [{ value: "a", text: "ì‚¬ì†Œí•œ ê²ƒê¹Œì§€ ëª¨ë‘ ê³µìœ í•˜ë©° ìœ„ë¡œë°›ê³  ì‹¶ë‹¤" }, { value: "b", text: "ê±±ì •ì‹œí‚¬ê¹Œ ë´, ì‹¬ê°í•œ ë¬¸ì œëŠ” í˜¼ì í•´ê²°í•˜ë ¤ í•œë‹¤" }, { value: "c", text: "ëŒ€ë¶€ë¶„ í˜¼ì í•´ê²°í•˜ì§€ë§Œ, ì •ë§ í˜ë“¤ ë• ê¸°ëŒ„ë‹¤" }] },
            { gender: 'female', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q_f3", text: "ì—°ì¸ì—ê²Œ 'ë³´í˜¸ë°›ê³  ìˆë‹¤'ê³  ëŠë¼ê²Œ í•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ í–‰ë™ì€ ë¬´ì—‡ì¸ê°€ìš”?", type: "select", options: [{ value: "a", text: "ë°¤ëŠ¦ê²Œ ê·€ê°€í•  ë•Œ ë°ë¦¬ëŸ¬ ì™€ì£¼ëŠ” ë“± ë¬¼ë¦¬ì ì¸ ë³´í˜¸" }, { value: "b", text: "ë‹¤ë¥¸ ì‚¬ëŒ ì•ì—ì„œ ë‚´ í¸ì„ ë“¤ì–´ì£¼ëŠ” ë“± ì‚¬íšŒì ì¸ ë³´í˜¸" }, { value: "c", text: "ë‚´ ê°ì •ì„ ì„¸ì‹¬í•˜ê²Œ ì‚´í”¼ê³  ê³µê°í•´ì£¼ëŠ” ì •ì„œì ì¸ ë³´í˜¸" }] },
            { gender: 'both', part: "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)", id: "q19", text: "ì—°ì¸ì´ ë‹¹ì‹ ì—ê²Œ ë§í•˜ì§€ ì•Šê³ , ì¹œí•œ ì´ì„± ì¹œêµ¬ì™€ ë‹¨ë‘˜ì´ ì €ë… ì‹ì‚¬ë¥¼ í•œ ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ê°ì •ì€?", type: "range", min: 1, max: 5, default: 3, labels: ["(ì¿¨í•¨) ê·¸ëŸ´ ìˆ˜ ìˆì§€", "(í™”ë‚¨) ì–´ë–»ê²Œ ë§ë„ ì•ˆ í•´?"] },
        ];

        const partInfo = {
            "Part 1: ì‚¶ì˜ ë‚˜ì¹¨ë°˜ (ê°€ì¹˜ê´€)": { title: "ê°€ì¹˜ê´€ ê¶í•©", icon: "ğŸ§­", color: "green" },
            "Part 2: íƒ€ê³ ë‚œ ë‹¤ë¦„ (ì„±ê²©/ê¸°ì§ˆ)": { title: "ì„±ê²© ê¶í•©", icon: "ğŸ­", color: "purple" },
            "Part 3: ì¼ìƒì˜ í•© (ë¼ì´í”„ìŠ¤íƒ€ì¼)": { title: "ë¼ì´í”„ìŠ¤íƒ€ì¼ ê¶í•©", icon: "ğŸ¡", color: "yellow" },
            "Part 4: ê´€ê³„ì˜ ê¸°ìˆ  (ì†Œí†µ/ê´€ê³„)": { title: "ì†Œí†µ ë°©ì‹ ê¶í•©", icon: "â¤ï¸", color: "red" }
        };

        // --- UI Rendering Functions ---
        function renderQuestions() {
            const maleForm = document.getElementById('male-form');
            const femaleForm = document.getElementById('female-form');
            maleForm.innerHTML = '';
            femaleForm.innerHTML = '';
            let currentPartMale = "";
            let currentPartFemale = "";

            questions.forEach(q => {
                if (q.gender === 'both' || q.gender === 'male') {
                    if (q.part !== currentPartMale) {
                        currentPartMale = q.part;
                        maleForm.innerHTML += `<h3 class="text-xl font-semibold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">${partInfo[currentPartMale].icon} ${currentPartMale}</h3>`;
                    }
                    maleForm.innerHTML += createQuestionHTML(q, 'male');
                }
                
                if (q.gender === 'both' || q.gender === 'female') {
                     if (q.part !== currentPartFemale) {
                        currentPartFemale = q.part;
                        femaleForm.innerHTML += `<h3 class="text-xl font-semibold text-pink-700 border-b-2 border-pink-200 pb-2 mb-4">${partInfo[currentPartFemale].icon} ${currentPartFemale}</h3>`;
                    }
                    femaleForm.innerHTML += createQuestionHTML(q, 'female');
                }
            });

            document.querySelectorAll('input[type="range"]').forEach(range => {
                const valueSpan = document.getElementById(`${range.id}-value`);
                if(valueSpan) valueSpan.textContent = range.value;
                range.addEventListener('input', (event) => {
                    const targetValueSpan = document.getElementById(`${event.target.id}-value`);
                    if(targetValueSpan) targetValueSpan.textContent = event.target.value;
                });
            });
        }
        
        function createQuestionHTML(q, gender) {
            const isSpecific = q.gender !== 'both';
            const specificClass = isSpecific ? 'gender-specific-q' : '';
            const specificTag = isSpecific ? `<span class="text-xs font-bold text-white bg-indigo-500 px-2 py-1 rounded-full ml-2">íŠ¹í™” ì§ˆë¬¸</span>` : '';

            return `
                <div class="question-card bg-white p-4 rounded-lg shadow ${specificClass}">
                    <label for="${q.id}-${gender}" class="block text-base font-medium text-gray-700 mb-3">${q.text} ${specificTag}</label>
                    ${q.type === 'select' ? createSelect(q, gender) : createRange(q, gender)}
                </div>`;
        }


        function createSelect(q, gender) {
            const optionsHTML = q.options.map(opt => `<option value="${opt.value}">${opt.text}</option>`).join('');
            return `<select id="${q.id}-${gender}" name="${q.id}" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white">
                        ${optionsHTML}
                    </select>`;
        }

        function createRange(q, gender) {
            return `<div class="flex flex-col items-center">
                        <input type="range" id="${q.id}-${gender}" name="${q.id}" min="${q.min}" max="${q.max}" value="${q.default}" class="w-full">
                        <div class="w-full flex justify-between text-xs text-gray-500 px-1 mt-1">
                            <span>${q.labels[0]}</span>
                            <span id="${q.id}-${gender}-value" class="font-bold text-indigo-600 text-sm">${q.default}</span>
                            <span>${q.labels[1]}</span>
                        </div>
                    </div>`;
        }

        // --- Matching Algorithm Logic ---
        function calculateResults() {
            const maleAnswers = getAnswers('male');
            const femaleAnswers = getAnswers('female');
            
            const results = {};
            let allScores = [];
            const commonQuestions = questions.filter(q => q.gender === 'both');

            for (const part in partInfo) {
                const partQuestions = commonQuestions.filter(q => q.part === part);
                if (partQuestions.length === 0) continue;

                const partScores = partQuestions.map(q => {
                    const maleAnswer = maleAnswers[q.id];
                    const femaleAnswer = femaleAnswers[q.id];
                    return calculateScore(q, maleAnswer, femaleAnswer);
                });
                
                const averageScore = partScores.reduce((a, b) => a + b, 0) / partScores.length;
                results[part] = {
                    score: Math.round(averageScore),
                    comment: getComment(part, Math.round(averageScore))
                };
                allScores.push(...partScores);
            }
            
            const overallAverage = allScores.reduce((a, b) => a + b, 0) / allScores.length;
            results.overall = {
                score: Math.round(overallAverage),
                comment: getOverallComment(Math.round(overallAverage))
            };

            displayResults(results, maleAnswers, femaleAnswers);
        }

        function getAnswers(gender) {
            const form = document.getElementById(`${gender}-form`);
            const formData = new FormData(form);
            const answers = {};
            for (let [key, value] of formData.entries()) {
                answers[key] = value;
            }
            return answers;
        }

        function calculateScore(question, answer1, answer2) {
            if (question.type === 'select') {
                return answer1 === answer2 ? 100 : 0;
            } else if (question.type === 'range') {
                const diff = Math.abs(parseInt(answer1) - parseInt(answer2));
                const maxDiff = question.max - question.min;
                return 100 * (1 - (diff / maxDiff));
            }
            return 0;
        }

        // --- Result Generation and Display ---
        function getComment(part, score) {
            if (score >= 80) return "ì•„ì£¼ ì˜ ë§ì•„ìš”! ë‘ ë¶„ì€ ì´ ë¶€ë¶„ì—ì„œ ì„œë¡œë¥¼ ê¹Šì´ ì´í•´í•˜ê³  í¸ì•ˆí•¨ì„ ëŠë‚„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.";
            if (score >= 60) return "ì˜ ë§ëŠ” í¸ì´ì—ìš”. ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆì§€ë§Œ, ì„œë¡œì—ê²Œ ê¸ì •ì ì¸ ìê·¹ì´ ë  ìˆ˜ ìˆëŠ” ì§€ì ì…ë‹ˆë‹¤.";
            if (score >= 40) return "ì„œë¡œ ë‹¤ë¥¸ ì ì´ ìˆë„¤ìš”. ì´ ì°¨ì´ê°€ ê°ˆë“±ì˜ ì›ì¸ì´ ë  ìˆ˜ë„ ìˆì§€ë§Œ, ëŒ€í™”ë¥¼ í†µí•´ ì¶©ë¶„íˆ ë§ì¶°ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            return "ìƒë‹¹í•œ ì°¨ì´ê°€ ë°œê²¬ë˜ì—ˆì–´ìš”. ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ì„œë¡œì˜ ë‹¤ë¦„ì„ ì¸ì •í•˜ê³  ì¡´ì¤‘í•˜ëŠ” ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•´ ë³´ì…ë‹ˆë‹¤.";
        }
        
        function getOverallComment(score) {
            if (score >= 85) return "í™˜ìƒì˜ ì»¤í”Œ! ì„œë¡œì—ê²Œ ì•ˆì •ê°ì„ ì£¼ëŠ”, í¸ì•ˆí•œ ì†Œìš¸ë©”ì´íŠ¸ê°€ ë  ìˆ˜ ìˆì–´ìš”!";
            if (score >= 70) return "ë©‹ì§„ ì¡°í•©ì´ì—ìš”! ì„œë¡œì˜ ë‹¤ë¦„ì„ ë³´ì™„í•´ì£¼ë©° í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆëŠ” ê´€ê³„ì…ë‹ˆë‹¤.";
            if (score >= 50) return "ì•Œì•„ê°€ëŠ” ì¬ë¯¸ê°€ ìˆê² ì–´ìš”! ê³µí†µì ê³¼ ì°¨ì´ì ì„ ë°œê²¬í•˜ë©° í¥ë¯¸ë¡œìš´ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            return "ë„ì „ì ì¸ ê´€ê³„ê°€ ë  ìˆ˜ ìˆì–´ìš”! ë§ì€ ëŒ€í™”ì™€ ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ë§Œ, ê·¸ë§Œí¼ ì„œë¡œì—ê²Œì„œ ë§ì€ ê²ƒì„ ë°°ìš¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.";
        }

        function displayResults(results, maleAnswers, femaleAnswers) {
            document.getElementById('overall-score').textContent = `${results.overall.score}ì `;
            document.getElementById('overall-comment').textContent = results.overall.comment;

            const container = document.getElementById('detailed-results-container');
            container.innerHTML = '';
            for (const part in partInfo) {
                if(results[part]){
                    const info = partInfo[part];
                    const result = results[part];
                    container.innerHTML += createResultCard(info, result);
                }
            }
            
            for (const part in partInfo) {
                if(results[part]){
                    const info = partInfo[part];
                    const result = results[part];
                    const progressBar = document.querySelector(`#bar-${info.color}`);
                    setTimeout(() => {
                        if(progressBar) progressBar.style.width = `${result.score}%`;
                    }, 100);
                }
            }
            
            document.getElementById('ice-breaking-questions').innerHTML = generateIceBreakers(maleAnswers, femaleAnswers);

            document.getElementById('result-modal').classList.remove('hidden');
            document.getElementById('result-modal').classList.add('flex');
            setTimeout(() => {
                document.getElementById('result-content').classList.remove('scale-95');
                document.getElementById('result-content').classList.add('scale-100');
            }, 50);
        }
        
        function createResultCard(info, result) {
            const colorClasses = {
                green: { bg: 'bg-green-100', border: 'border-green-300', bar: 'bg-green-500', text: 'text-green-800' },
                purple: { bg: 'bg-purple-100', border: 'border-purple-300', bar: 'bg-purple-500', text: 'text-purple-800' },
                yellow: { bg: 'bg-yellow-100', border: 'border-yellow-300', bar: 'bg-yellow-500', text: 'text-yellow-800' },
                red: { bg: 'bg-red-100', border: 'border-red-300', bar: 'bg-red-500', text: 'text-red-800' },
            };
            const c = colorClasses[info.color];

            return `
                <div class="${c.bg} ${c.border} border-l-4 p-4 rounded-lg">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-lg font-bold ${c.text}">${info.icon} ${info.title}</h3>
                        <span class="font-bold text-xl ${c.text}">${result.score}ì </span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="bar-${info.color}" class="result-bar ${c.bar} h-2.5 rounded-full" style="width: 0%;"></div>
                    </div>
                    <p class="mt-2 text-sm ${c.text}">${result.comment}</p>
                </div>
            `;
        }
        
        // --- Icebreaker Generation Logic (v4: Gender-specific) ---
        function generateIceBreakers(maleAnswers, femaleAnswers) {
            let suggestions = [];

            const getAnswerText = (qId, answerValue) => {
                const question = questions.find(q => q.id === qId);
                if (!question) return answerValue;
                const option = question.options.find(o => o.value === answerValue);
                return option ? `"${option.text}"` : answerValue;
            };

            // 1. ê³µí†µ ì§ˆë¬¸ ë¹„êµ (ê°ˆë“± í•´ê²° ë°©ì‹)
            const q5_male_text = getAnswerText('q5', maleAnswers.q5);
            const q5_female_text = getAnswerText('q5', femaleAnswers.q5);
            if (maleAnswers.q5 !== femaleAnswers.q5) {
                suggestions.push({
                    title: "ğŸ­ ì„±ê²©: ìš°ë¦¬ë§Œì˜ ê°ˆë“± í•´ê²° ê·œì¹™ ë§Œë“¤ê¸°",
                    text: `ê°ˆë“±ì´ ìƒê²¼ì„ ë•Œ, ë‚¨ì„±ë¶„ì€ ${q5_male_text}, ì—¬ì„±ë¶„ì€ ${q5_female_text}(ì´)ë¼ê³  ë‹µí–ˆì–´ìš”. ì„œë¡œì˜ ë°©ì‹ì´ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€, ê·¸ë¦¬ê³  ê°ìì—ê²Œ ì™œ ê·¸ ë°©ì‹ì´ í¸ì•ˆí•œì§€ ì´ì•¼ê¸°í•´ë³´ì„¸ìš”. ê·¸ë¦¬ê³  'ìš°ë¦¬'ë§Œì˜ ê±´ê°•í•œ ë‹¤íˆ¼ì˜ ê·œì¹™ì„ í•¨ê»˜ ë§Œë“¤ì–´ë³´ë©´ ì–´ë–¨ê¹Œìš”?`
                });
            }

            // 2. ì—¬ì„± íŠ¹í™” ì§ˆë¬¸ -> ë‚¨ì„±ì—ê²Œ ëŒ€í™” ì£¼ì œë¡œ ì œì‹œ
            const q_f1_answer = getAnswerText('q_f1', femaleAnswers.q_f1);
            suggestions.push({
                title: "ğŸ‘©â€ğŸ¦° ì—¬ì„±ë¶„ì˜ ìƒê°: ì»¤ë¦¬ì–´ì™€ ê°€ì •",
                text: `ì—¬ì„±ë¶„ì€ 'ê²°í˜¼/ì¶œì‚°ìœ¼ë¡œ ì¸í•œ ì»¤ë¦¬ì–´ ì¤‘ë‹¨ ê°€ëŠ¥ì„±'ì— ëŒ€í•´ ${q_f1_answer} ì´ë¼ê³  ë‹µí–ˆì–´ìš”. ì´ ë‹µë³€ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•˜ì‹œë‚˜ìš”? ì—¬ì„±ë¶„ì˜ ì»¤ë¦¬ì–´ ê³„íšê³¼ ê¿ˆì„ ì§€ì§€í•˜ê¸° ìœ„í•´ ì–´ë–¤ ì—­í• ì„ í•´ì¤„ ìˆ˜ ìˆì„ì§€ í•¨ê»˜ ì´ì•¼ê¸° ë‚˜ëˆ ë³´ì„¸ìš”.`
            });
            
            // 3. ë‚¨ì„± íŠ¹í™” ì§ˆë¬¸ -> ì—¬ì„±ì—ê²Œ ëŒ€í™” ì£¼ì œë¡œ ì œì‹œ
            const q_m2_answer = getAnswerText('q_m2', maleAnswers.q_m2);
            suggestions.push({
                title: "ğŸ‘¨â€ğŸ¦± ë‚¨ì„±ë¶„ì˜ ìƒê°: ê°œì¸ì˜ ì‹œê°„ê³¼ ê´€ê³„",
                text: `ë‚¨ì„±ë¶„ì€ 'ì·¨ë¯¸ ìƒí™œë¡œ ì—°ì¸ì´ ì„œìš´í•´í•  ë•Œ' ${q_m2_answer} ì´ë¼ê³  ë‹µí–ˆì–´ìš”. ë‚¨ì„±ë¶„ì—ê²Œ ê·¸ ì·¨ë¯¸ê°€ ì–´ë–¤ ì˜ë¯¸ì¸ì§€, ê·¸ë¦¬ê³  ë‘ ì‚¬ëŒì´ í•¨ê»˜í•˜ëŠ” ì‹œê°„ê³¼ ê°ìì˜ ì‹œê°„ì„ ì–´ë–»ê²Œ ì¡°ìœ¨í•˜ë©´ ì¢‹ì„ì§€ ëŒ€í™”í•´ë³´ì„¸ìš”.`
            });

            // 4. ì—¬ì„± íŠ¹í™” ì§ˆë¬¸ -> ë‚¨ì„±ì—ê²Œ ëŒ€í™” ì£¼ì œë¡œ ì œì‹œ
            const q_f3_answer = getAnswerText('q_f3', femaleAnswers.q_f3);
            suggestions.push({
                title: "â¤ï¸ ê´€ê³„: ê·¸ë…€ê°€ 'ë³´í˜¸ë°›ëŠ”ë‹¤'ê³  ëŠë¼ëŠ” ìˆœê°„",
                text: `ì—¬ì„±ë¶„ì€ ì—°ì¸ì—ê²Œ 'ë³´í˜¸ë°›ê³  ìˆë‹¤'ê³  ëŠë¼ê²Œ í•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ í–‰ë™ìœ¼ë¡œ ${q_f3_answer}ì„(ë¥¼) ê¼½ì•˜ì–´ìš”. ê·¸ë…€ê°€ ì–¸ì œ ê°€ì¥ ì•ˆì •ê°ê³¼ ì‚¬ë‘ì„ ëŠë¼ëŠ”ì§€ ê¸°ì–µí•˜ê³  í‘œí˜„í•´ì£¼ì„¸ìš”.`
            });


            return suggestions.map(s => `
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h4 class="font-bold text-gray-800 text-lg mb-2">${s.title}</h4>
                    <p class="text-gray-600 text-base">${s.text}</p>
                </div>
            `).join('');
        }

        // --- Event Listeners ---
        document.getElementById('view-result-btn').addEventListener('click', calculateResults);
        document.getElementById('close-modal-btn').addEventListener('click', () => {
            document.getElementById('result-content').classList.add('scale-95');
            document.getElementById('result-content').classList.remove('scale-100');
            setTimeout(() => {
                document.getElementById('result-modal').classList.add('hidden');
                document.getElementById('result-modal').classList.remove('flex');
            }, 300);
        });

        // Initial Render
        window.onload = renderQuestions;
    </script>
</body>
</html>

